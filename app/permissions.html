<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<html>
<head>
<title>test</title>
</head>
<body>
	<fieldset>
	<legend>ONLINE BLOCK-CHAIN MEDICAL INSURANCE SYSTEM</legend>
		<table width="933" height="412">
			<tr height="170">
				<td width="570px"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td>
				<table>
						<tr>
							<td>AccountID:</td>
							<td><input type="text" id="personId" name="personId"
								value="Your personID" size="20" maxlength="20"
								onfocus="if (this.value=='Your personID')  this.value='';" /></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td>Password:</td>
							<td><input type="password" name="password"
								value="Your password" size="20" maxlength="20"
								onfocus="if (this.value=='Your password')  this.value='';" /></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td>Participant type:</td>
							<td><select id="type">
									<option value="Patient">patient</option>
									<option value="Doctor">doctor</option>
									<option value="Insurer">insurer</option>
							</select></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<td>Name:</td>
							<td><input type="text" id="name" name="name" size="20"
								maxlength="20" /></td>
							<td></td>
							<td></td>
						</tr>
						<!--  <tr> 
 <td>Hospital belong:</td>  
 <td><input type="text" id="unitBelong"name="UnitBelong" size="20" maxlength="20" /></td>
 <td> </td>  
 <td> </td> 
 </tr> -->
						<tr>
						</tr>
						<tr>
						</tr>
					</table></td>
			<tr>
				<td></td>
				<td><table>
						<tr>
							<td><input type="button" name="login" value="Login"
								onclick="login()" /></td>
							<td><input type="reset" name="rs" value="reset"></td>
							<td><input type="button" name="button" value="Sign up"
								onclick="register()"></td>
						</tr>
						</tr>
					</table></td>
		</table>
	</fieldset>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script>
		function register() {
			var personId = document.getElementById("personId").value;
			var type = document.getElementById("type").value;
			var name = document.getElementById("name").value;
			var data = {
				"$class" : "org.example.mynetwork." + type,
				"personId" : personId,
				"name" : name,
				"type" : type
			}
			$.ajax({
				type : 'POST',
				url : "http://localhost:3000/api/" + type,
				data : JSON.stringify(data),
				contentType : "application/json",
				dataType : "json",
				success : function(res) {
					alert("registered!");
				}
			});
		}

		function login() {
			var personId = document.getElementById("personId").value;
			var type = document.getElementById("type").value;
			$.ajax({
				type : 'HEAD',
				url : "http://localhost:3000/api/" + type,
				data : JSON.stringify(personId),
				contentType : "application/json",
				dataType : "json",
				error : function() {
					alert("User does not exist!");
				},
				success : function(res) {
					window.location.href = type + ".html";
				}
			});
		}
	</script>
</body>
</html>
